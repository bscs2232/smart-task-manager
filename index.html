<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Task Manager</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- Top navbar -->
  <header class="navbar">
    <div class="navbar-left">
      <h1 class="app-title">Task Manager</h1>
    </div>
    <div class="navbar-right">
      <input type="text" id="searchInput" class="search-input" placeholder="Search tasks..." />
      <select id="filterSelect" class="filter-select">
        <option value="all">All</option>
        <option value="todo">Todo</option>
        <option value="inprogress">In Progress</option>
        <option value="done">Done</option>
      </select>
      <button id="themeToggle" class="theme-btn">Dark Mode</button>
    </div>
  </header>

  <!-- Main content -->
  <div class="container">

    <!-- Left sidebar -->
    <aside class="sidebar">

      <!-- Progress box -->
      <div class="progress-box">
        <h3>Progress</h3>
        <div class="progress-bar-wrap">
          <div class="progress-bar" id="progressBar"></div>
        </div>
        <p id="progressText" class="progress-text">0 of 0 tasks done (0%)</p>
      </div>

      <!-- Stats box -->
      <div class="stats-box">
        <div class="stat-item">
          <span id="statTotal" class="stat-num">0</span>
          <span class="stat-label">Total</span>
        </div>
        <div class="stat-item">
          <span id="statDone" class="stat-num">0</span>
          <span class="stat-label">Done</span>
        </div>
        <div class="stat-item">
          <span id="statPending" class="stat-num">0</span>
          <span class="stat-label">Pending</span>
        </div>
      </div>

      <button id="openModalBtn" class="btn btn-primary btn-block">+ Add New Task</button>

      <!-- Priority legend -->
      <div class="legend-box">
        <h4>Priority Colors</h4>
        <ul class="legend-list">
          <li><span class="legend-dot high"></span> High Priority</li>
          <li><span class="legend-dot medium"></span> Medium Priority</li>
          <li><span class="legend-dot low"></span> Low Priority</li>
        </ul>
      </div>

    </aside>

    <!-- Kanban board -->
    <main class="board" id="board">

      <!-- Todo column -->
      <div class="column" data-column="todo">
        <div class="column-header">
          <span class="column-dot dot-todo"></span>
          <h2>Todo</h2>
          <span class="column-count" id="countTodo">0</span>
        </div>
        <div class="column-body" id="col-todo" data-column="todo"></div>
      </div>

      <!-- In Progress column -->
      <div class="column" data-column="inprogress">
        <div class="column-header">
          <span class="column-dot dot-inprogress"></span>
          <h2>In Progress</h2>
          <span class="column-count" id="countInprogress">0</span>
        </div>
        <div class="column-body" id="col-inprogress" data-column="inprogress"></div>
      </div>

      <!-- Done column -->
      <div class="column" data-column="done">
        <div class="column-header">
          <span class="column-dot dot-done"></span>
          <h2>Done</h2>
          <span class="column-count" id="countDone">0</span>
        </div>
        <div class="column-body" id="col-done" data-column="done"></div>
      </div>

    </main>
  </div>

  <!-- Add / Edit Task Modal -->
  <div class="modal-overlay" id="modalOverlay" hidden>
    <div class="modal">
      <div class="modal-header">
        <h2 id="modalTitle">Add New Task</h2>
        <button id="closeModalBtn" class="close-btn">X</button>
      </div>

      <form id="taskForm">
        <input type="hidden" id="taskId" />

        <div class="form-group">
          <label for="taskTitle">Title *</label>
          <input type="text" id="taskTitle" placeholder="Task title" required />
          <span class="error-msg" id="titleError"></span>
        </div>

        <div class="form-group">
          <label for="taskDesc">Description</label>
          <textarea id="taskDesc" placeholder="Optional description..." rows="3"></textarea>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="taskPriority">Priority</label>
            <select id="taskPriority">
              <option value="low">Low</option>
              <option value="medium" selected>Medium</option>
              <option value="high">High</option>
            </select>
          </div>
          <div class="form-group">
            <label for="taskDue">Due Date</label>
            <input type="date" id="taskDue" />
          </div>
        </div>

        <div class="form-group">
          <label for="taskStatus">Status</label>
          <select id="taskStatus">
            <option value="todo" selected>Todo</option>
            <option value="inprogress">In Progress</option>
            <option value="done">Done</option>
          </select>
        </div>

        <div class="modal-footer">
          <button type="button" id="cancelModalBtn" class="btn btn-secondary">Cancel</button>
          <button type="submit" id="submitBtn" class="btn btn-primary">Add Task</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Toast notification -->
  <div class="toast" id="toast"></div>

  <script type="module" src="js/app.js"></script>
</body>
</html>
